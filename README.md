# 照片展示墙项目 v2.0

一个基于Docker的现代化照片展示应用，支持照片-艺人信息智能关联、批量数据管理和安全的权限控制系统。

## ✨ 核心功能

### 🎭 照片-艺人关联系统
- **智能关联**：点击照片可搜索并关联艺人信息
- **实时更新**：关联后照片标题立即显示真实艺人姓名
- **重新关联**：支持修改已有的照片-艺人关联关系
- **关联状态**：清晰显示照片的关联状态（已关联/未关联）

### 📊 数据管理系统
- **Excel/CSV导入**：支持批量导入艺人数据表格
- **数据预览**：导入前预览和验证数据格式
- **智能解析**：自动识别表格中的姓名、生日、身高等信息
- **数据清理**：一键清空和重建数据库

### 🔐 安全权限系统
- **身份验证**：管理员页面需要密码验证
- **会话管理**：24小时自动过期保护
- **权限控制**：关联功能仅限管理员操作
- **路由保护**：防止未授权访问管理功能

### 🎨 用户体验优化
- **无限滚动**：流畅的照片浏览体验
- **搜索功能**：支持按艺人姓名搜索照片
- **响应式设计**：完美适配移动端和桌面端
- **加载状态**：优雅的骨架屏和加载动画
- **统计面板**：显示照片总数、艺人数量等统计信息

## 技术架构

### 前端技术栈
- **React 18** + **TypeScript** - 现代化前端框架
- **Vite** - 快速构建工具
- **Tailwind CSS** - 实用优先的CSS框架
- **React Query (TanStack Query)** - 数据获取和缓存
- **React Router** - 路由管理
- **Context API** - 全局状态管理
- **Lucide React** - 现代图标库

### 后端技术栈
- **Node.js** + **Express** - 后端API服务
- **MongoDB** + **Mongoose** - 数据库和ODM
- **Sharp** - 高性能图片处理
- **Multer** - 文件上传处理
- **XLSX** - Excel文件解析
- **CORS** - 跨域资源共享

### 部署架构
- **Docker** + **Docker Compose** - 容器化部署
- **Nginx** - 反向代理和静态文件服务
- **文件系统存储** - 照片和元数据存储

## 使用方法

### 1. 准备照片
在项目根目录的 `photos` 文件夹中放置照片，按数字命名：
```
photos/
├── 1.jpg
├── 2.jpg
├── 3.jpg
...
├── 120.jpg
```

支持的图片格式：JPG、PNG、WebP、HEIC

### 2. 启动项目
使用Docker Compose启动所有服务：
```bash
# 构建并启动所有服务
docker-compose up -d

# 查看服务状态
docker-compose ps

# 查看日志
docker-compose logs -f
```

### 3. 访问应用
- 前端应用：http://localhost
- 后端API：http://localhost:5551

### 4. 管理照片信息

#### 普通用户功能
- **浏览照片**：无限滚动浏览所有照片
- **搜索功能**：按艺人姓名搜索照片
- **查看资料**：点击照片查看艺人详细信息

#### 管理员功能
- **访问管理面板**：访问 `/admin` 并输入密码
- **关联艺人**：点击未关联照片，搜索并关联艺人信息
- **批量导入**：上传Excel/CSV文件批量导入艺人数据
- **数据管理**：清空、重建数据库
- **编辑信息**：修改艺人详细资料

#### 数据导入流程
1. **准备数据**：使用Excel或CSV格式，包含姓名、生日、身高等信息
2. **上传文件**：在管理面板选择"表格导入"
3. **预览数据**：检查解析结果，确认数据正确
4. **确认导入**：导入艺人数据到数据库
5. **手动关联**：点击照片搜索并关联对应艺人

## 项目结构

```
photo/
├── client/                 # 前端React应用
│   ├── src/
│   │   ├── components/     # React组件
│   │   ├── pages/         # 页面组件
│   │   ├── hooks/         # 自定义Hooks
│   │   └── types/         # TypeScript类型定义
│   ├── Dockerfile         # 前端Docker配置
│   └── package.json       # 前端依赖
├── server/                # 后端Node.js API
│   ├── src/
│   │   ├── app.js         # 主应用文件（完整版）
│   │   ├── app-simple.js  # 简化版应用文件
│   │   └── models/        # 数据模型
│   │       └── Star.js    # 艺人信息模型
│   ├── scripts/           # 工具脚本
│   │   └── generate-star-records.js
│   ├── Dockerfile         # 后端Docker配置
│   └── package.json       # 后端依赖
├── photos/                # 照片存储目录
│   ├── 1.jpg
│   ├── 2.jpg
│   └── ...
├── data/                  # 数据文件
│   └── photo-names.json   # 姓名数据
├── docker-compose.yml     # Docker编排配置
└── README.md             # 项目说明
```

## 开发说明

### 本地开发
```bash
# 前端开发
cd client
npm install
npm run dev

# 后端开发
cd server
npm install
npm run dev
```

### 生产部署
```bash
# 构建并启动所有服务
docker-compose up -d

# 停止服务
docker-compose down

# 重新构建
docker-compose up -d --build
```

### 数据管理
- 照片文件存储在 `photos/` 目录
- 姓名数据存储在 `data/photo-names.json`
- 支持JSON格式的数据导入导出
- 管理员可以批量编辑姓名信息

## 浏览器兼容性

支持所有现代浏览器：
- Chrome 60+
- Firefox 60+
- Safari 12+
- Edge 79+

## 版本更新日志

### v2.0.0 (2024-12-19)
🎉 **重大版本更新 - 照片-艺人关联系统**

#### 新增功能
- ✨ **照片-艺人智能关联系统**
  - 点击照片可搜索并关联艺人信息
  - 支持重新关联和修改关联关系
  - 实时显示关联状态和艺人姓名

- 📊 **完整的数据管理系统**
  - Excel/CSV批量导入艺人数据
  - 数据预览和验证功能
  - 一键清空和重建数据库

- 🔐 **安全权限控制系统**
  - 管理员身份验证和会话管理
  - 关联功能权限控制
  - 管理页面路由保护

- 🎨 **用户体验全面升级**
  - 无限滚动照片浏览
  - 统计面板和筛选功能
  - 现代化UI设计和动画效果

#### 技术升级
- 🗄️ 集成MongoDB数据库
- 📋 支持Excel/CSV文件解析
- 🔄 React Query数据缓存
- 🎯 Context API状态管理
- 🛡️ TypeScript类型安全

#### 架构优化
- 📦 模块化组件设计
- 🔧 自定义Hooks封装
- 🚀 性能优化和代码分离
- 🐳 Docker容器化部署

### v1.0.0 (2024-11-01)
- 🎯 基础照片展示功能
- 🔍 简单搜索功能
- 📱 响应式设计
- 🐳 Docker部署支持

## 许可证

MIT License